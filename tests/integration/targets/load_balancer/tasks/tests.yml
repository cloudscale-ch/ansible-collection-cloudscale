---
- name: Test create a running load balancer (simple)
  cloudscale_ch.cloud.load_balancer:
    name: '{{ cloudscale_resource_prefix }}-lb'
    zone: '{{ cloudscale_test_zone }}'
    flavor: '{{ cloudscale_test_flavor_lb }}'
  register: load_balancer
- name: Verify create a running load balancer (simple)
  assert:
    that:
      - load_balancer is changed
      - load_balancer.state == 'running'
      - load_balancer.name == '{{ cloudscale_resource_prefix }}-lb'

- name: Test create a running load balancer (simple) idempotence
  cloudscale_ch.cloud.load_balancer:
    name: '{{ cloudscale_resource_prefix }}-lb'
    zone: '{{ cloudscale_test_zone }}'
    flavor: '{{ cloudscale_test_flavor_lb }}'
  register: load_balancer
- name: Verify create a running load balancer (simple) idempotence
  assert:
    that:
      - load_balancer is not changed
      - load_balancer.state == 'running'
      - load_balancer.name == '{{ cloudscale_resource_prefix }}-lb'
